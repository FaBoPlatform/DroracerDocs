# BLE33のFirmware

## BLE33のFirmwareの焼き込み

### コマンドラインツールのインストール
SEGGER J-LINKのプログラミングツールであるnRF Command Line Toolsをインストールします。お使いの環境に合わせたツールをダウンロードします。（下の写真はMacOSXの場合）

```http
https://www.nordicsemi.com/Software-and-tools/Development-Tools/nRF-Command-Line-Tools/Download
```

![](./img/fw01_a.png)

ここでは最新の10.7.0のコマンドラインツールをダウンロードから解凍し、インストールします。

解凍すると以下のようなパッケージ（JLinkのドライバとプログラミングツール）がダウンロードできると思います。

![](./img/fw02.png)

はじめに、JLink_MacOSX_V662b.pkgでインストール

次にnRF-Command_Line_tools_10_7_0_OSX.pkgでインストールします。

##ブートローダーをダウンロード

ターミナルを起動しArduinoのサイトから以下をクローンします。
```
$cd ~
$git clone https://github.com/arduino/ArduinoCore-nRF528x-mbedos.git
```
ブートローダーがあるディレクトリに移動して

```
$cd ~/ArduinoCore-nRF528x-mbedos/bootloaders/nano33ble
```

バージョンの確認
```
$ nrfjprog –-version

nrfjprog version: 10.4.1 

JLinkARM.dll version: 6.50b
```

下の写真のように、　デバッガ（J-Link lite）からFaBoのJLINK LITEボードとT A G―C O N NE C Tで端子を押さえつけて接続しDroRacerボードと接続、DroRacerへマイクロU S BもPCから給電します。（順序としてボードへの給電が先になります。）

![](./img/fw03.jpg)

まず、nRF52のモジュール(MDBT50)のR O M領域を削除

```
$nrfjprog -f nrf52 --eraseall
```

ブートローダーをモジュールに焼き込みます。

```
$nrfjprog -f nrf52 --program bootloader.hex
```

nRF52モジュール(MDBT50)を再起動します

```
$nrfjprog --reset
```

これでブートローダーの焼き込みはできました。
次の章、ArduinoIDEの設定です。


